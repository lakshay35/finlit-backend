{
    "swagger": "2.0",
    "info": {
        "contact": {
            "name": "Lakshay Sharma",
            "url": "sharmalakshay.com",
            "email": "lakshay35@gmail.com"
        }
    },
    "paths": {
        "/account/create-link-token": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Creates a link token to setup UI for generating public tokens",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Create Link Token",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.LinkTokenPayload"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/account/get": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets a list of all external accounts registered via Plaid",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Get all registered external accounts",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.Account"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/account/get-account-details": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets account information based on access token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Get Account Information",
                "parameters": [
                    {
                        "description": "Account payload to get informaion on",
                        "name": "account",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.PlaidAccount"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/account/live-balances": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Retrieves live account balances for all accounts attached to an external account registratiom",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Get Current A/c Balances",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.PlaidGetBalancesResponse"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/account/register-token": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Creates a permanent access token based on public token",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Register Access Token",
                "parameters": [
                    {
                        "description": "Token Payload for registering access token",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.PublicTokenPayload"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": ""
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/account/transactions": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets all transactions for the  past 30 days",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "External Accounts"
                ],
                "summary": "Get Transactions",
                "parameters": [
                    {
                        "description": "Account payload to identify transactions with",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.PlaidTransaction"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/budget/create": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Creates a budget with requesting user as owner",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budgets"
                ],
                "summary": "Create a budget",
                "parameters": [
                    {
                        "description": "Budget body needed to create budget",
                        "name": "budget",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.CreateBudgetPayload"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.Budget"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/budget/delete": {
            "delete": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets a list of all budgets current user is a part of",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budgets"
                ],
                "summary": "Get Budgets",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Budget ID to delete",
                        "name": "Budget-ID",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.Budget"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/budget/get": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets a list of all budgets current user is a part of",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budgets"
                ],
                "summary": "Get Budgets",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.Budget"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/expense/add": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Add expense to an existing budget",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budget Expenses"
                ],
                "summary": "Adds an expense to the given budget",
                "parameters": [
                    {
                        "description": "Expense payload representing entity to be created",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.AddExpensePayload"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/models.Expense"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/expense/delete/{id}": {
            "delete": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Deletes Expense from DB based on id",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budget Expenses"
                ],
                "summary": "Deletes Expense",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Expense ID (UUID)",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "204": {
                        "description": ""
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/expense/get": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets a list of all expenses tied to a given budget",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budget Expenses"
                ],
                "summary": "Gets expenses for budget",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Budget ID to get expenses against",
                        "name": "Budget-ID",
                        "in": "header",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.Expense"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/expense/get-expense-charge-cycles": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets all the expense charge cycles available to create an expense for a budget",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budget Expenses"
                ],
                "summary": "Gets a list of expense charge cycles",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/models.ExpenseChargeCycle"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/expense/update": {
            "put": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Add expense to an existing budget",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Budget Expenses"
                ],
                "summary": "Adds an expense to the database",
                "parameters": [
                    {
                        "description": "Expense payload representing entity to be updated",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.Expense"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.Expense"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/role/add-user-role-to-budget": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Registers a user profile in the finlit database",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User Roles"
                ],
                "summary": "Registers user to the database",
                "responses": {
                    "200": {
                        "description": ""
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/user/get": {
            "get": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Gets the user's profile from the finlit database",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Users"
                ],
                "summary": "Gets user from the database",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.User"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        },
        "/user/register": {
            "post": {
                "security": [
                    {
                        "Google AccessToken": []
                    }
                ],
                "description": "Registers a user profile in the finlit database",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Users"
                ],
                "summary": "Registers user to the database",
                "parameters": [
                    {
                        "description": "User Information Paylod",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/models.UserRegistrationPayload"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/models.User"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    },
                    "409": {
                        "description": "Conflict",
                        "schema": {
                            "$ref": "#/definitions/models.Error"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "models.Account": {
            "type": "object",
            "properties": {
                "access_token": {
                    "type": "string"
                },
                "account_name": {
                    "type": "string"
                },
                "external_account_id": {
                    "type": "string"
                },
                "institutional_id": {
                    "type": "string"
                },
                "user_id": {
                    "type": "string"
                }
            }
        },
        "models.AddExpensePayload": {
            "type": "object",
            "properties": {
                "budget_id": {
                    "type": "string"
                },
                "expense_charge_cycle": {
                    "$ref": "#/definitions/models.ExpenseChargeCycle"
                },
                "expense_description": {
                    "type": "string"
                },
                "expense_name": {
                    "type": "string"
                },
                "expense_value": {
                    "type": "number"
                }
            }
        },
        "models.Budget": {
            "type": "object",
            "properties": {
                "budget_id": {
                    "type": "string"
                },
                "budget_name": {
                    "type": "string"
                },
                "owner_id": {
                    "type": "string"
                }
            }
        },
        "models.CreateBudgetPayload": {
            "type": "object",
            "properties": {
                "budget_name": {
                    "type": "string"
                }
            }
        },
        "models.Error": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "boolean"
                },
                "reason": {
                    "type": "string"
                }
            }
        },
        "models.Expense": {
            "type": "object",
            "properties": {
                "budget_id": {
                    "type": "string"
                },
                "expense_charge_cycle": {
                    "$ref": "#/definitions/models.ExpenseChargeCycle"
                },
                "expense_description": {
                    "type": "string"
                },
                "expense_id": {
                    "type": "string"
                },
                "expense_name": {
                    "type": "string"
                },
                "expense_value": {
                    "type": "number"
                }
            }
        },
        "models.ExpenseChargeCycle": {
            "type": "object",
            "properties": {
                "expense_charge_cycle_id": {
                    "type": "integer"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "models.LinkTokenPayload": {
            "type": "object",
            "properties": {
                "linkToken": {
                    "type": "string"
                }
            }
        },
        "models.PlaidAccount": {
            "type": "object",
            "properties": {
                "account_id": {
                    "type": "string"
                },
                "balances": {
                    "$ref": "#/definitions/models.PlaidAccountBalances"
                },
                "mask": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "official_name": {
                    "type": "string"
                },
                "subtype": {
                    "type": "string"
                },
                "type": {
                    "type": "string"
                },
                "verification_status": {
                    "type": "string"
                }
            }
        },
        "models.PlaidAccountBalances": {
            "type": "object",
            "properties": {
                "available": {
                    "type": "number"
                },
                "current": {
                    "type": "number"
                },
                "iso_currency_code": {
                    "type": "string"
                },
                "limit": {
                    "type": "number"
                },
                "unofficial_currency_code": {
                    "type": "string"
                }
            }
        },
        "models.PlaidGetBalancesResponse": {
            "type": "object",
            "properties": {
                "accounts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/models.PlaidAccount"
                    }
                },
                "request_id": {
                    "type": "string"
                }
            }
        },
        "models.PlaidLocation": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "city": {
                    "type": "string"
                },
                "country": {
                    "type": "string"
                },
                "lat": {
                    "type": "number"
                },
                "lon": {
                    "type": "number"
                },
                "postal_code": {
                    "type": "string"
                },
                "region": {
                    "type": "string"
                },
                "store_number": {
                    "type": "string"
                }
            }
        },
        "models.PlaidPaymentMeta": {
            "type": "object",
            "properties": {
                "by_order_of": {
                    "type": "string"
                },
                "payee": {
                    "type": "string"
                },
                "payer": {
                    "type": "string"
                },
                "payment_method": {
                    "type": "string"
                },
                "payment_processor": {
                    "type": "string"
                },
                "ppd_id": {
                    "type": "string"
                },
                "reason": {
                    "type": "string"
                },
                "reference_number": {
                    "type": "string"
                }
            }
        },
        "models.PlaidTransaction": {
            "type": "object",
            "properties": {
                "account_id": {
                    "type": "string"
                },
                "account_owner": {
                    "type": "string"
                },
                "amount": {
                    "type": "number"
                },
                "authorized_date": {
                    "type": "string"
                },
                "category": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "category_id": {
                    "type": "string"
                },
                "date": {
                    "type": "string"
                },
                "iso_currency_code": {
                    "type": "string"
                },
                "location": {
                    "$ref": "#/definitions/models.PlaidLocation"
                },
                "name": {
                    "type": "string"
                },
                "payment_channel": {
                    "type": "string"
                },
                "payment_meta": {
                    "$ref": "#/definitions/models.PlaidPaymentMeta"
                },
                "pending": {
                    "type": "boolean"
                },
                "pending_transaction_id": {
                    "type": "string"
                },
                "transaction_code": {
                    "type": "string"
                },
                "transaction_id": {
                    "type": "string"
                },
                "transaction_type": {
                    "type": "string"
                },
                "unofficial_currency_code": {
                    "type": "string"
                }
            }
        },
        "models.PublicTokenPayload": {
            "type": "object",
            "properties": {
                "public_token": {
                    "type": "string"
                }
            }
        },
        "models.User": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "google_id": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "registration_date": {
                    "type": "string"
                },
                "user_id": {
                    "type": "string"
                }
            }
        },
        "models.UserRegistrationPayload": {
            "type": "object",
            "properties": {
                "email": {
                    "type": "string"
                },
                "first_name": {
                    "type": "string"
                },
                "google_id": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "Google AccessToken": {
            "type": "apiKey",
            "name": "Authorization",
            "in": "header"
        }
    }
}